<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>RuBlocks - –ò–≥—Ä–∞</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            touch-action: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .mobile-controls {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
        }

        .mobile-controls.show {
            display: flex;
        }

        .control-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.8);
            border: 3px solid white;
            color: white;
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.1s;
        }

        .control-btn:active {
            transform: scale(0.9);
            background: rgba(118, 75, 162, 0.8);
        }

        /* –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .joystick-container {
            display: none;
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 150px;
            height: 150px;
            z-index: 1000;
        }

        .joystick-container.show {
            display: block;
        }

        .joystick-base {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.5);
            position: relative;
        }

        .joystick-stick {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.9);
            border: 3px solid white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ */
        .device-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 1000;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π canvas */
        #game-canvas {
            display: block;
            touch-action: none;
        }

        /* –ú–æ–±–∏–ª—å–Ω—ã–π header */
        @media (max-width: 768px) {
            .game-header {
                padding: 10px;
                font-size: 14px;
                flex-wrap: wrap;
            }

            .user-info {
                gap: 10px;
                font-size: 12px;
            }

            .user-info span {
                white-space: nowrap;
            }

            .user-avatar {
                width: 35px;
                height: 35px;
            }

            .btn-logout {
                padding: 8px 15px;
                font-size: 12px;
            }

            #game-info {
                bottom: 120px;
                font-size: 14px;
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</div>
        <p id="device-loading" style="color: #999; margin-top: 20px; font-size: 14px;">
            –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞...
        </p>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="game-container" id="game-main" style="display: none;">
        <div class="game-header">
            <div class="user-info">
                <img id="user-avatar" class="user-avatar" src="" alt="Avatar">
                <span>üë§ <strong id="username">–ó–∞–≥—Ä—É–∑–∫–∞...</strong></span>
                <span>‚≠ê <strong id="level">1</strong></span>
                <span>üèÜ <strong id="high-score">0</strong></span>
                <span>üí∞ <strong id="coins">0</strong></span>
                <span>üìä <strong id="current-score">0</strong></span>
            </div>
            <button class="btn-logout" onclick="handleLogout()">–í—ã—Ö–æ–¥</button>
        </div>

        <canvas id="game-canvas"></canvas>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ -->
        <div id="game-info">
            <p id="control-info">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ -->
        <div class="device-indicator" id="device-indicator">
            üñ•Ô∏è –ü–ö
        </div>

        <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã -->
        <div class="mobile-controls" id="mobile-controls">
            <button class="control-btn" id="btn-left">‚¨ÖÔ∏è</button>
            <button class="control-btn" id="btn-jump">‚¨ÜÔ∏è</button>
            <button class="control-btn" id="btn-right">‚û°Ô∏è</button>
        </div>

        <!-- –î–∂–æ–π—Å—Ç–∏–∫ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) -->
        <div class="joystick-container" id="joystick-container">
            <div class="joystick-base">
                <div class="joystick-stick" id="joystick-stick"></div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script>
        // ==========================================
        // Firebase Configuration
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyA76Du2jnVguJavcO7k6XFEQJ0tPhHF_UI",
            authDomain: "rublocks-2862b.firebaseapp.com",
            projectId: "rublocks-2862b",
            storageBucket: "rublocks-2862b.firebasestorage.app",
            messagingSenderId: "1035853997972",
            appId: "1:1035853997972:web:77cf13e7197b9387cd9181"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ==========================================
        // –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –£–°–¢–†–û–ô–°–¢–í–ê
        // ==========================================
        
        class DeviceDetector {
            constructor() {
                this.isMobile = this.checkMobile();
                this.isTablet = this.checkTablet();
                this.isDesktop = !this.isMobile && !this.isTablet;
                this.isTouchDevice = this.checkTouch();
                this.os = this.detectOS();
                this.browser = this.detectBrowser();
                
                console.log('üîç –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ:', this.getDeviceInfo());
            }

            checkMobile() {
                return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                       (window.innerWidth <= 768);
            }

            checkTablet() {
                return /iPad|Android/i.test(navigator.userAgent) && 
                       (window.innerWidth >= 768 && window.innerWidth <= 1024);
            }

            checkTouch() {
                return 'ontouchstart' in window || 
                       navigator.maxTouchPoints > 0 || 
                       navigator.msMaxTouchPoints > 0;
            }

            detectOS() {
                const ua = navigator.userAgent;
                if (/Android/i.test(ua)) return 'Android';
                if (/iPhone|iPad|iPod/i.test(ua)) return 'iOS';
                if (/Windows/i.test(ua)) return 'Windows';
                if (/Mac/i.test(ua)) return 'macOS';
                if (/Linux/i.test(ua)) return 'Linux';
                return 'Unknown';
            }

            detectBrowser() {
                const ua = navigator.userAgent;
                if (/Chrome/i.test(ua)) return 'Chrome';
                if (/Safari/i.test(ua)) return 'Safari';
                if (/Firefox/i.test(ua)) return 'Firefox';
                if (/Edge/i.test(ua)) return 'Edge';
                return 'Unknown';
            }

            getDeviceInfo() {
                return {
                    type: this.isDesktop ? 'Desktop' : this.isTablet ? 'Tablet' : 'Mobile',
                    os: this.os,
                    browser: this.browser,
                    touch: this.isTouchDevice,
                    screen: `${window.innerWidth}x${window.innerHeight}`
                };
            }

            getDeviceIcon() {
                if (this.isMobile) return 'üì±';
                if (this.isTablet) return 'üì±';
                return 'üñ•Ô∏è';
            }

            getDeviceType() {
                if (this.isMobile) return 'Mobile';
                if (this.isTablet) return 'Tablet';
                return 'Desktop';
            }
        }

        const device = new DeviceDetector();

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        document.getElementById('device-loading').textContent = 
            `${device.getDeviceIcon()} ${device.getDeviceType()} - ${device.os}`;

        // ==========================================
        // –ò–ì–†–ê –° –ê–î–ê–ü–¢–ò–í–ù–´–ú –£–ü–†–ê–í–õ–ï–ù–ò–ï–ú
        // ==========================================
        
        let game = {
            canvas: null,
            ctx: null,
            user: null,
            score: 0,
            coins: 0,
            startTime: Date.now(),
            player: {
                x: 100,
                y: 0,
                vx: 0,
                vy: 0,
                width: 40,
                height: 60,
                jumping: false,
                onGround: false
            },
            keys: {},
            joystick: {
                active: false,
                x: 0,
                y: 0
            },

            init: function(user) {
                this.user = user;
                this.canvas = document.getElementById('game-canvas');
                this.ctx = this.canvas.getContext('2d');

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
                this.resizeCanvas();

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                this.updateUI();

                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                this.loadStats();

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                this.setupControls();

                // –°–∫—Ä—ã—Ç–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('game-main').style.display = 'flex';

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                const indicator = document.getElementById('device-indicator');
                indicator.innerHTML = `${device.getDeviceIcon()} ${device.getDeviceType()}<br><small>${device.os}</small>`;

                // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                this.player.y = this.canvas.height - 100;
                this.gameLoop();

                console.log('‚úÖ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞', device.getDeviceType());
            },

            resizeCanvas: function() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight - (device.isMobile ? 60 : 70);
            },

            updateUI: function() {
                document.getElementById('username').textContent = 
                    this.user.displayName || this.user.email.split('@')[0];
                document.getElementById('user-avatar').src = 
                    `https://api.dicebear.com/7.x/avataaars/svg?seed=${this.user.uid}`;
            },

            loadStats: async function() {
                try {
                    const doc = await db.collection('users').doc(this.user.uid).get();
                    if (doc.exists) {
                        const stats = doc.data().stats || {};
                        document.getElementById('level').textContent = stats.level || 1;
                        document.getElementById('high-score').textContent = stats.highScore || 0;
                        document.getElementById('coins').textContent = stats.coins || 0;
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
                }
            },

            setupControls: function() {
                if (device.isMobile || device.isTablet) {
                    this.setupMobileControls();
                } else {
                    this.setupDesktopControls();
                }

                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
                window.addEventListener('resize', () => {
                    this.resizeCanvas();
                });
            },

            setupDesktopControls: function() {
                document.getElementById('control-info').innerHTML = 
                    '‚å®Ô∏è <strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –°–¢–†–ï–õ–ö–ò - –¥–≤–∏–∂–µ–Ω–∏–µ, –ü–†–û–ë–ï–õ - –ø—Ä—ã–∂–æ–∫';

                // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
                document.addEventListener('keydown', (e) => {
                    this.keys[e.code] = true;
                    
                    if (e.code === 'Space') {
                        e.preventDefault();
                        this.jump();
                    }
                });

                document.addEventListener('keyup', (e) => {
                    this.keys[e.code] = false;
                });

                // –ö–ª–∏–∫ –º—ã—à—å—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—á–∫–æ–≤
                this.canvas.addEventListener('click', () => {
                    this.addScore(5);
                    this.addCoins(1);
                });
            },

            setupMobileControls: function() {
                document.getElementById('control-info').innerHTML = 
                    'üì± <strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –ö–Ω–æ–ø–∫–∏ –∏–ª–∏ —Å–≤–∞–π–ø';

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
                const controls = document.getElementById('mobile-controls');
                controls.classList.add('show');

                // –ö–Ω–æ–ø–∫–∞ –≤–ª–µ–≤–æ
                const btnLeft = document.getElementById('btn-left');
                btnLeft.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.keys.ArrowLeft = true;
                });
                btnLeft.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.keys.ArrowLeft = false;
                });

                // –ö–Ω–æ–ø–∫–∞ –≤–ø—Ä–∞–≤–æ
                const btnRight = document.getElementById('btn-right');
                btnRight.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.keys.ArrowRight = true;
                });
                btnRight.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.keys.ArrowRight = false;
                });

                // –ö–Ω–æ–ø–∫–∞ –ø—Ä—ã–∂–∫–∞
                const btnJump = document.getElementById('btn-jump');
                btnJump.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.jump();
                });

                // –°–≤–∞–π–ø—ã
                this.setupSwipeControls();

                // –¢–∞–ø –ø–æ canvas –¥–ª—è –æ—á–∫–æ–≤
                this.canvas.addEventListener('touchstart', (e) => {
                    if (e.touches.length === 2) { // –î–≤–∞ –ø–∞–ª—å—Ü–∞
                        e.preventDefault();
                        this.addScore(5);
                        this.addCoins(1);
                    }
                });
            },

            setupSwipeControls: function() {
                let touchStartX = 0;
                let touchStartY = 0;

                this.canvas.addEventListener('touchstart', (e) => {
                    touchStartX = e.touches[0].clientX;
                    touchStartY = e.touches[0].clientY;
                });

                this.canvas.addEventListener('touchend', (e) => {
                    const touchEndX = e.changedTouches[0].clientX;
                    const touchEndY = e.changedTouches[0].clientY;

                    const diffX = touchEndX - touchStartX;
                    const diffY = touchEndY - touchStartY;

                    // –°–≤–∞–π–ø –≤–≤–µ—Ä—Ö - –ø—Ä—ã–∂–æ–∫
                    if (Math.abs(diffY) > Math.abs(diffX) && diffY < -30) {
                        this.jump();
                    }
                });
            },

            jump: function() {
                if (this.player.onGround) {
                    this.player.vy = -15;
                    this.player.jumping = true;
                    this.player.onGround = false;
                    this.addScore(2);
                }
            },

            updatePlayer: function() {
                // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
                this.player.vy += 0.8;

                // –î–≤–∏–∂–µ–Ω–∏–µ
                if (this.keys.ArrowLeft || this.keys.KeyA) {
                    this.player.vx = -5;
                } else if (this.keys.ArrowRight || this.keys.KeyD) {
                    this.player.vx = 5;
                } else {
                    this.player.vx *= 0.8; // –¢—Ä–µ–Ω–∏–µ
                }

                // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
                this.player.x += this.player.vx;
                this.player.y += this.player.vy;

                // –ì—Ä–∞–Ω–∏—Ü—ã
                const groundY = this.canvas.height - 100;
                if (this.player.y >= groundY) {
                    this.player.y = groundY;
                    this.player.vy = 0;
                    this.player.onGround = true;
                    this.player.jumping = false;
                }

                if (this.player.x < 0) this.player.x = 0;
                if (this.player.x > this.canvas.width - this.player.width) {
                    this.player.x = this.canvas.width - this.player.width;
                }
            },

            draw: function() {
                // –û—á–∏—Å—Ç–∫–∞
                this.ctx.fillStyle = '#87CEEB';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // –ó–µ–º–ª—è
                this.ctx.fillStyle = '#90EE90';
                this.ctx.fillRect(0, this.canvas.height - 50, this.canvas.width, 50);

                // –ò–≥—Ä–æ–∫
                this.ctx.fillStyle = '#667eea';
                this.ctx.fillRect(this.player.x, this.player.y, this.player.width, this.player.height);

                // –õ–∏—Ü–æ –∏–≥—Ä–æ–∫–∞
                this.ctx.fillStyle = '#FFD700';
                this.ctx.beginPath();
                this.ctx.arc(this.player.x + 20, this.player.y + 20, 15, 0, Math.PI * 2);
                this.ctx.fill();

                // –ó–∞–≥–æ–ª–æ–≤–æ–∫
                const fontSize = device.isMobile ? 24 : 36;
                this.ctx.fillStyle = '#000';
                this.ctx.font = `bold ${fontSize}px Arial`;
                this.ctx.textAlign = 'center';
                this.ctx.fillText('üéÆ RuBlocks', this.canvas.width / 2, 40);

                // –°—á—ë—Ç
                if (this.score > 0) {
                    this.ctx.font = `bold ${device.isMobile ? 20 : 28}px Arial`;
                    this.ctx.fillStyle = '#667eea';
                    this.ctx.fillText(`–°—á—ë—Ç: ${this.score}`, this.canvas.width / 2, 80);
                }
            },

            gameLoop: function() {
                this.updatePlayer();
                this.draw();
                requestAnimationFrame(() => this.gameLoop());
            },

            addScore: function(points) {
                this.score += points;
                document.getElementById('current-score').textContent = this.score;

                const highScore = parseInt(document.getElementById('high-score').textContent);
                if (this.score > highScore) {
                    document.getElementById('high-score').textContent = this.score;
                }
            },

            addCoins: function(amount) {
                this.coins += amount;
                const current = parseInt(document.getElementById('coins').textContent);
                document.getElementById('coins').textContent = current + amount;
            },

            saveStats: async function() {
                try {
                    const playTime = Math.floor((Date.now() - this.startTime) / 1000);
                    const userRef = db.collection('users').doc(this.user.uid);
                    const doc = await userRef.get();
                    
                    if (doc.exists) {
                        const currentStats = doc.data().stats || {};
                        
                        await userRef.update({
                            'stats.gamesPlayed': (currentStats.gamesPlayed || 0) + 1,
                            'stats.highScore': Math.max(currentStats.highScore || 0, this.score),
                            'stats.coins': (currentStats.coins || 0) + this.coins,
                            'stats.totalPlayTime': (currentStats.totalPlayTime || 0) + playTime,
                            'lastDevice': device.getDeviceType(),
                            'lastOS': device.os
                        });
                        
                        console.log('‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                    }
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                }
            }
        };

        // ==========================================
        // –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø
        // ==========================================
        
        auth.onAuthStateChanged((user) => {
            if (user) {
                console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', user.email);
                game.init(user);
            } else {
                console.log('‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω');
                window.location.href = '../index.html';
            }
        });

        // ==========================================
        // –í–´–•–û–î
        // ==========================================
        
        async function handleLogout() {
            if (confirm('–í—ã–π—Ç–∏? –ü—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω.')) {
                await game.saveStats();
                await auth.signOut();
            }
        }

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        window.addEventListener('beforeunload', () => {
            game.saveStats();
        });

        console.log('‚úÖ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –¥–ª—è', device.getDeviceType());
    </script>
</body>
</html>